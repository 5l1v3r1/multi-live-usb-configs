#!ipxe

:selection

menu iPXE boot menu
item debian64		Boot debian 64bit installer
item debian		Boot debian 32bit installer
item debian64gui	Boot debian 64bit installer [gtk]
item debiangui		Boot debian 32bit installer [gtk]
item mageia64		Boot mageia 64bit installer
item mageia		Boot mageia 32bit installer
item opensuse64		Boot opensuse 64bit installer (current version)
item opensuse		Boot opensuse 32bit installer (current version)
item opensuse114	Boot opensuse 11.4 32bit installer
item opensusef64	Boot opensuse Factory 64bit installer
item opensusef32	Boot opensuse Factory 32bit installer
item plop		Boot plop boot manager
item tinycore		Boot tinycore linux
item tinycore64		Boot tinycore linux [64bit]
item arch		Boot archlinux installer
item arch-text		Boot archlinux installer [text mode menu]
item centos		Boot CentOS installer
item scientific		Boot Scientific Linux installer
item fedora		Boot Fedora installer
item fedora-mirror	Boot Fedora installer [mirror]
item ubuntu		Boot Ubuntu installer
item ubuntu64		Boot Ubuntu installer [64bit]
item slitaz		Boot SliTaz
item slitaz-rolling	Boot SliTaz [rolling]




item --key c config	Configure iPXE
item --key x exit	Exit iPXE
set menu-timeout 0



choose system || goto :selection

goto ${system}


:scientific
  dhcp
  set baseurl:string http://ftp.scientificlinux.org/linux/scientific/7/x86_64/os/
  initrd ${baseurl:string}images/pxeboot/initrd.img
  chain ${baseurl:string}images/pxeboot/vmlinuz repo=${baseurl:string}


:slitaz
  dhcp
  set weburl http://mirror.slitaz.org/pxe/
  set 210:string ${weburl} && chain ${weburl}pxelinux.0 && boot ||
  set weburl http://mirror.switch.ch/ftp/mirror/slitaz/pxe/
  set 210:string ${weburl} && chain ${weburl}pxelinux.0 && boot ||
  set weburl http://download.tuxfamily.org/slitaz/pxe/
  set 210:string ${weburl} && chain ${weburl}pxelinux.0 && boot 

:slitaz-rolling
  dhcp
  sanboot http://mirror.slitaz.org/iso/rolling/slitaz-rolling.iso

:fedora


  dhcp
  set 209:string cfg/pxelinux.cfg
  set 210:string http://dl.fedoraproject.org/pub/alt/bfo/
  chain ${210:string}pxelinux.0

:fedora-mirror
# certain fedora mirrors picked by BFO entry (the one above)
# are missing .treeinfo file in the os/ subdir 
# this breaks installation
# if that happens to you, pick a specific mirror that works
# to work that issue around

  dhcp

  set baseurl:string http://ftp.icm.edu.pl/pub/Linux/fedora/linux//releases/20/Fedora/x86_64/os
  initrd ${baseurl:string}/images/pxeboot/initrd.img
  chain  ${baseurl:string}/images/pxeboot/vmlinuz repo=${baseurl:string}

:centos

  dhcp
  set baseurl:string http://mirror.centos.org/centos/7/os/x86_64/
  initrd ${baseurl:string}isolinux/initrd.img
  chain  ${baseurl:string}isolinux/vmlinuz repo=${baseurl:string}


#
# utopic is currently broken, use syslinux menu with downloaded kernel and initrd instead for now
# changed it anyway, maybe it will get fixed
# https://bugs.launchpad.net/ubuntu/+source/syslinux/+bug/1385069
#

:ubuntu

  dhcp
  set 210:string http://archive.ubuntu.com/ubuntu/dists/utopic/main/installer-i386/current/images/netboot/
  chain ${210:string}pxelinux.0

:ubuntu64

  dhcp
  set 210:string http://archive.ubuntu.com/ubuntu/dists/utopic/main/installer-amd64/current/images/netboot/
  chain ${210:string}pxelinux.0

:debian64

  dhcp
  set 210:string http://ftp.pl.debian.org/debian/dists/wheezy/main/installer-amd64/current/images/netboot/
  chain ${210:string}pxelinux.0

:debian

  dhcp
  set 210:string http://ftp.pl.debian.org/debian/dists/wheezy/main/installer-i386/current/images/netboot/
  chain ${210:string}pxelinux.0

:debian64gui

  dhcp
  set 210:string http://ftp.pl.debian.org/debian/dists/wheezy/main/installer-amd64/current/images/netboot/gtk/
  chain ${210:string}pxelinux.0

:debiangui

  dhcp
  set 210:string http://ftp.pl.debian.org/debian/dists/wheezy/main/installer-i386/current/images/netboot/gtk/
  chain ${210:string}pxelinux.0

:mageia64
  dhcp
  set baseurl:string http://ftp5.gwdg.de/pub/linux/mageia/distrib/cauldron/x86_64/isolinux/x86_64/

  initrd   ${baseurl:string}all.rdz
  imgfetch ${baseurl:string}vmlinuz
  boot vmlinuz || goto selection


:mageia
  dhcp

  set baseurl:string http://ftp5.gwdg.de/pub/linux/mageia/distrib/cauldron/i586/isolinux/i386/
  initrd   ${baseurl:string}all.rdz
  imgfetch ${baseurl:string}vmlinuz
  boot vmlinuz || goto selection


:opensuse64
  dhcp
  set baseurl:string http://ftp.icm.edu.pl/pub/Linux/opensuse/distribution/openSUSE-current
  set arch:string x86_64
  goto opensuse-generic-boot


:opensusef64

  dhcp
  set baseurl:string http://ftp.icm.edu.pl/pub/Linux/opensuse/factory
  set arch:string x86_64
  goto opensuse-generic-boot


:opensusef32
  dhcp
  set baseurl:string http://ftp.icm.edu.pl/pub/Linux/opensuse/factory
  set arch:string i386
  goto opensuse-generic-boot


:opensuse
  dhcp
  set baseurl:string http://ftp.icm.edu.pl/pub/Linux/opensuse/distribution/openSUSE-current
  set arch:string i386
  goto opensuse-generic-boot


:opensuse114
  dhcp
  set baseurl:string http://ftp.icm.edu.pl/pub/Linux/opensuse/distribution/11.4
  set arch:string i386
  goto opensuse-generic-boot

:opensuse-generic-boot

  initrd   ${baseurl:string}/repo/oss/boot/${arch:string}/loader/initrd
  imgfetch ${baseurl:string}/repo/oss/boot/${arch:string}/loader/linux 
  boot     linux Textmode=1 install=${baseurl:string}/repo/oss || goto selection

:plop

  dhcp 
  imgfetch http://some_web_server/memdisk
  initrd http://some_web_server/plpbt.img
  chain memdisk || goto selection

# for some reason direct boot of plop doesn't seem to work correctly
# also, memdisk fails when the *.img file is packed with gzip 
# (which _really_ reduces size)


:tinycore
  dhcp 
  initrd http://repo.tinycorelinux.net/5.x/x86/release/distribution_files/core.gz
  imgfetch http://repo.tinycorelinux.net/5.x/x86/release/distribution_files/vmlinuz
  boot vmlinuz || goto selection

# all other tinycore args still apply here
# it's worth setting up a NFS share for your extensions + persistence in this mode
# to make full use of tinycore's features

:tinycore64
  dhcp
  initrd http://repo.tinycorelinux.net/5.x/x86/release/distribution_files/core64.gz
  imgfetch http://repo.tinycorelinux.net/5.x/x86/release/distribution_files/vmlinuz64
  boot vmlinuz64 || goto selection


:arch

  dhcp

# config file name
  set 209:string cfg/arch.cfg
# path prefix
  set 210:string http://releng.archlinux.org/pxeboot/boot/
  chain ${210:string}pxelinux.0

# other params are documented on http://www.syslinux.org/wiki/index.php/PXELINUX

:arch-text

  dhcp
  set 209:string cfg/arch_text.cfg
  set 210:string http://releng.archlinux.org/pxeboot/boot/
  chain ${210:string}pxelinux.0

